import sys
import bruteforce
# Web Explotation

def login():
    username = input("Username: ")
    password = input("Password: ")
    if password == "abc456" and username == "admin":
        print("Congradulations you made it into the website.")
        print("You can now deface it.")
        sys.exit()

def victory():
    print("Congradulation. You have just bypassed the User Login.")
    print("You can now deface the website")
    print("Would you like to try another way?")
    go_again = input("(y/n): ")
    if go_again == "y":
        attack_selection()
    else:
        sys.exit()

def robots():
    print("The URL for the website is: https://company_name.com")
    print("What could be added to that url to get more info?")
    print("(If you are stuck leave the question blank)")
    awnser1 = input()
    if awnser1 == "":
        print("Hint: /r-----.txt")
        print()
        robots()
    elif awnser1 == "/robots.txt":
        print("You are redirected to a page that displays the following:")
        print()
        print("User-agent: *")
        print("Disallow: /8033f.html")
        correct_url = input("Input the full URL: ")
        if correct_url == "https://company_name.com/8033f.html":
            victory()
    else:
        print("Not quite. Keep trying.")
        robots()
    
def brute_force():
    bruteforce.start()

def SQL():
    database = " login_database\n clients\n product_list\n"
    login_database = "Username: admin\n Password: YWJjNDU2\n"
    print("SQL Injections is code that you insert into the website username/login")
    print("Look into the most common SQL injections online and try to get the Database.")
    print("If you are stuck leave the input blank.")
    input("(Enter to Continue)")
    while True:
        username = input(" Username: ")
        if "SHOW TABLES;" in username:
            print(database)
            print("Great Job! Now try to find the login information")
            if "SELECT * FROM login_database;" in username:
                print(login_database)
                print("Well done. Now you have access to the website login info.")
                print("It seems the password is encrypted. Try to decrypt it using a web browser tool.")
                login()
        elif "SELECT * FROM login_database;" in username:
            print(login_database)
            print("Well done. Now you have access to the website login info.")
            print("It seems the password is encrypted. Try to decrypt it using a web browser tool.")
            login()
        elif username == "admin":
            password = input("Password: ")
            if password == "abc456":
                print("Congradulations you made it into the website.")
                print("You can now deface it.")
                sys.exit()
            else:
                print("Password is incorrect")
                print("Try decrypting it using www.base64decode.org")
        elif username == "":
            print("Here is your hint: www.w3schools.com/sql/sql_injection.asp")
        else:
            print("Input was not a SQL inquery.")

def cookies():
    print(" 1- Elements\n 2- Console\n 3- Sources\n 4- Network\n 5- Performance\n 6- Memory\n 7- Application")
    page = input("(Input the #): ")
    if page == "7":
        print("Good work. You can know navigate to the cookie value.")
        print("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOmZhbHNlLCJpYXQiOjE3NDM4NzM3NDgsImV4cCI6MTc0Mzg3NzM0OH0.EFZV9DwbaxfjDd69490to-uyko1grUnJ7cPd-uCpFnI")
        print("Go to token.dev and manipulate the cookie value.")
        print("(If you are stuck leave the input blank)")
        while True:
            alt_cookie = input("Input the altered cookie here: ")
            if alt_cookie == "eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTc0Mzg3Mzc0OCwiZXhwIjoxNzQzODc3MzQ4fQ":
                victory()
            elif alt_cookie == "":
                print("Try changin the algorithm/admin value. If you are still stuck input a ?")
            elif alt_cookie == "?":
                print("Step 1: Change the algorithm to none.")
                print("Step 2: Change the admin value to true")
            else: 
                print("That cookie doesn't work. Try again.")
    else: 
        print("There doesn't seem to be any cookie here.")
        print()
        cookies()
        

def attack_selection():
    print("Which of the following ways would you like to try?")
    print(" 1-URL Manipulation\n 2-Brute Force\n 3-SQL Injection\n 4-Cookie Manipulation")
    users_choice = input("(Input the #): ")
    if users_choice == "1":
        robots()
    elif users_choice == "2":
        brute_force()
    elif users_choice == "3":
        SQL()
    elif users_choice == "4":
        print("First we need to get access to the websites cookies.")
        print("You inspect the page. Where must you navigate to view website cookies")
        cookies()
    else:
        print("Input Invalid. Pick a number between 1-4.")
        print()
        attack_selection()

def main():
    print("You open the comapnies website and come across a login page")
    print("Try any username or password")
    print()
    login()
    print() 
    print("It seems like you are going to have to try another way in.")
    attack_selection()

main()